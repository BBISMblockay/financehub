<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FinanceHub Console</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
/* ==== Dark Futuristic UI ==== */
body {margin:0;font-family:'Inter',sans-serif;background:#0d0f12;color:#fff;display:flex;height:100vh;}
.sidebar{width:270px;background:rgba(255,255,255,.05);backdrop-filter:blur(10px);padding-top:35px;border-right:1px solid rgba(255,255,255,.08);}
#logo{text-align:center;font-size:22px;font-weight:700;margin-bottom:25px;}
.navItem{padding:14px 25px;margin:5px 18px;border-radius:10px;background:#1a1d22;border:1px solid #272b33;opacity:.75;cursor:pointer;transition:.25s;}
.navItem:hover{opacity:1;background:#242830;transform:translateX(4px);}
.navItem.active{background:linear-gradient(135deg,#5169ff,#7df1ff);color:#000;opacity:1;font-weight:700;}
.settingsBtn{margin-top:30px;color:#bfbfbf;opacity:.6;}
.settingsBtn:hover{opacity:1;transform:translateX(6px);}

#main{flex:1;padding:35px;}
#header{font-size:26px;font-weight:700;margin-bottom:25px;background:linear-gradient(90deg,#6f84ff,#7df1ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}

#iframeWrap{width:100%;height:82vh;background:#14171c;border:1px solid #2b3038;border-radius:14px;display:flex;align-items:center;justify-content:center;overflow:hidden;}
iframe{width:100%;height:100%;border:none;}
#placeholder{opacity:.35;font-size:18px;}

#settings{display:none;margin-top:20px;}
input{width:100%;padding:10px;border-radius:8px;background:#171b22;border:1px solid #262b33;color:white;}
.row{display:grid;grid-template-columns:120px 1fr;margin:10px 0;gap:12px;}
.saveBtn{background:#6f84ff;padding:10px;border-radius:8px;text-align:center;font-weight:600;cursor:pointer;margin-top:10px;}
.saveBtn:hover{filter:brightness(1.15);}
</style>
</head>

<body>

<div class="sidebar">
    <div id="logo">üìÅ FinanceHub</div>
    <div id="routes"></div>
    <div class="navItem settingsBtn" onclick="openSettings()">‚öô Settings</div>
</div>

<div id="main">
    <div id="header">AP Command Center</div>

    <div id="iframeWrap">
        <div id="placeholder">‚Üê Select a client</div>
    </div>

    <div id="settings">
        <h2>Configure Routes</h2>
        <div id="form"></div>
        <div class="saveBtn" onclick="updateConfig()">üíæ Save to GitHub</div>
    </div>
</div>

<script>
const CONFIG_URL = "https://bbismblockay.github.io/financehub/config.json";

/* Load config from GitHub */
async function loadConfig(){
  const res = await fetch(CONFIG_URL);
  window.config = await res.json();
  buildSidebar();
  buildForm();
}

/* Sidebar */
function buildSidebar(){
  const wrap=document.getElementById("routes");
  wrap.innerHTML="";
  config.routes.forEach((r,i)=>{
    if(r.name){
      let el=document.createElement("div");
      el.className="navItem";
      el.textContent=r.name;
      el.onclick=()=>loadRoute(i,el);
      wrap.appendChild(el);
    }
  });
}

/* Load iframe */
function loadRoute(i,el){
  document.querySelectorAll(".navItem").forEach(n=>n.classList.remove("active"));
  el.classList.add("active");
  document.getElementById("settings").style.display="none";
  document.getElementById("placeholder").style.display="none";
  document.getElementById("iframeWrap").innerHTML=`<iframe src="${config.routes[i].iframeUrl}"></iframe>`;
}

/* Settings panel */
function openSettings(){
  document.getElementById("iframeWrap").style.display="none";
  document.getElementById("settings").style.display="block";
}

function buildForm(){
  const form=document.getElementById("form");
  form.innerHTML="";
  config.routes.forEach((r,i)=>{
    form.innerHTML+=`
      <div class="row">
        <input id="name${i}" placeholder="Name" value="${r.name}">
        <input id="url${i}" placeholder="Iframe URL" value="${r.iframeUrl}">
      </div>`;
  });
}

/*  SAVE BACK TO GITHUB (next step)   */
function updateConfig(){
  alert("Config updated locally ‚Äî need GitHub API token to auto-save.\nI can enable that next.");
}
loadConfig();
</script>
</body>
</html>
